name: Update Homebrew

on:
  release:
    types: [published]
  workflow_dispatch:
    inputs:
      tag:
        description: "Version tag (e.g., v0.20.8)"
        required: true

permissions:
  contents: read

jobs:
  update:
    if: github.repository == 'withakay/ito'
    uses: ./.github/workflows/update-homebrew.yml
    with:
      tag: ${{ github.event_name == 'workflow_dispatch' && inputs.tag || github.event.release.tag_name }}
    secrets: inherit
